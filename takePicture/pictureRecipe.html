<!DOCTYPE html>
<html lang="en" class="app-html">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://www.kryogenix.org/code/browser/sorttable/sorttable.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap"
        rel="stylesheet">
    <link href="../style.css" rel="stylesheet" />
    <script>

        function decideBtnColor() {
            var selected = document.querySelectorAll('input[type="checkbox"]:checked').length
            if (selected != 0) {
                document.getElementById("generate-food-list-btn").className = "default-btn"
            } else {
                document.getElementById("generate-food-list-btn").className = "disabled-btn"
            }

        }

        function firstItemMinus() {
            var value = document.getElementById("item1").value
            if (value > 0) {
                document.getElementById("item1").value = value - 1
            }
        }
        function secondItemMinus() {
            var value = document.getElementById("item2").value
            if (value > 0) {
                document.getElementById("item2").value = value - 1
            }
        }
        function thirdItemMinus() {
            var value = document.getElementById("item3").value
            if (value > 0) {
                document.getElementById("item3").value = value - 1
            }
        }

        function firstItemPlus() {
            var value = parseInt(document.getElementById("item1").value) + 1
            document.getElementById("item1").value = value

        }
        function secondItemPlus() {
            var value = parseInt(document.getElementById("item2").value) + 1
            document.getElementById("item2").value = value
        }
        function thirdItemPlus() {
            var value = parseInt(document.getElementById("item3").value) + 1
            document.getElementById("item3").value = value
        }

        function pickDate1() {
            var selected = document.getElementById("date1")
            var date = selected.innerHTML;
            if (selected.style.display !== 'none') selected.style.display = 'none';
            var form1 = document.getElementById("changeDateForm1")
            form1.style.display = 'block';
            var inputContent = document.getElementById("newDateInput1")
            inputContent.value = date
        }

        function pickDate2() {
            var selected = document.getElementById("date2")
            var date = selected.innerHTML;
            if (selected.style.display !== 'none') selected.style.display = 'none';
            var form2 = document.getElementById("changeDateForm2")
            form2.style.display = 'block';
            var inputContent = document.getElementById("newDateInput2")
            inputContent.value = date
        }

        function pickDate3() {
            var selected = document.getElementById("date3")
            var date = selected.innerHTML;
            if (selected.style.display !== 'none') selected.style.display = 'none';
            var form3 = document.getElementById("changeDateForm3")
            form3.style.display = 'block';
            var inputContent = document.getElementById("newDateInput3")
            inputContent.value = date
        }

        function generateList() {
            if (document.getElementById("generate-food-list-btn").className == "default-btn") {
                location.replace("../index.html")
            }
        }

        document.addEventListener('mouseup', function (e) {
            var form1 = document.getElementById('changeDateForm1')
            var form2 = document.getElementById('changeDateForm2')
            var form3 = document.getElementById('changeDateForm3')
            var selected1 = document.getElementById("date1")
            var selected2 = document.getElementById("date2")
            var selected3 = document.getElementById("date3")
            if (!form1.contains(e.target) && selected1.style.display === 'none'
                && form1.style.display === 'block') {
                var date1 = form1.newDateInput1.value
                selected1.innerHTML = date1
                selected1.style.display = 'block'
                form1.style.display = 'none'
            }
            if (!form2.contains(e.target) && selected2.style.display === 'none'
                && form2.style.display === 'block') {
                var date2 = form2.newDateInput2.value
                selected2.innerHTML = date2
                selected2.style.display = 'block'
                form2.style.display = 'none'
            }
            if (!form3.contains(e.target) && selected3.style.display === 'none'
                && form3.style.display === 'block') {
                var date3 = form3.newDateInput3.value
                selected3.innerHTML = date3
                selected3.style.display = 'block'
                form3.style.display = 'none'
            }
        }
        );
    </script>
    <title>Smart Storage Design System</title>
</head>
<style>
    @media only screen and (max-width:500px) {

        /* For mobile phones: */
        .menu,
        .main,
        .right {
            width: 100%;
        }
    }
</style>

<body>
    <div class="row">
        <div>
            <a href="./pictureForFood.html">
                <span id="back"><img src="../assets/back_btn.png" class="back-btn pb-2"></span>
            </a>
            <h2 class="recommend-header" style="text-align: center;">Your food list</h2>
        </div>

        <div class="table-scroll" style="height: 65vh;">
            <table class="sortable list-table food-list">
                <tr>
                    <th style="width: 20%;">Item</th>
                    <th style="width: 40%;">Qty</th>
                    <th style="width: 30%;">Expiration Date</th>
                    <th style="width: 10%;">Select</th>
                </tr>
                <tr>
                    <td>
                        Mandarin
                        <br>(lb)
                    </td>
                    <td>
                        <div class="mt-3">
                            <div class="input-counter">
                                <span class="minus-btn" onclick="firstItemMinus()">-</span>
                                <input id="item1" type="text" value="2">
                                <span class="plus-btn" onclick="firstItemPlus()">+</span>
                            </div>
                        </div>
                    </td>

                    <td onclick="pickDate1()">
                        <p class="date-in-list" id="date1">12/20/2021</p>
                        <form class="change-date-form" id="changeDateForm1">
                            <input type="text" class="date-input" id="newDateInput1" name="newDateInput1"
                                value="11/20/2021"><br>
                        </form>
                    </td>
                    <td>
                        <div class="selected-food-list-btn">
                            <input type="checkbox" id="checkbox1" onclick="decideBtnColor()" />
                            <label for="checkbox1"></label>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        Cherry
                        <br>(lb)
                    </td>
                    <td>
                        <div class="mt-3">
                            <div class="input-counter">
                                <span class="minus-btn" onclick="secondItemMinus()">-</span>
                                <input id="item2" type="text" value="2">
                                <span class="plus-btn" onclick="secondItemPlus()">+</span>
                            </div>
                        </div>
                    </td>
                    <td onclick="pickDate2()">
                        <p id="date2" class="date-in-list">12/22/2021</p>
                        <form class="change-date-form" id="changeDateForm2">
                            <input type="text" class="date-input" id="newDateInput2" name="newDateInput2"
                                value="11/22/2021"><br>
                        </form>
                    </td>
                    <td>
                        <div class="selected-food-list-btn">
                            <input type="checkbox" id="checkbox2" onclick="decideBtnColor()" />
                            <label for="checkbox2"></label>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Pomegra
                        <br>-nate
                        <br>(lb)
                    </td>
                    <td>
                        <div class="mt-3">
                            <div class="input-counter">
                                <span class="minus-btn" onclick="thirdItemMinus()">-</span>
                                <input id="item3" type="text" value="1">
                                <span class="plus-btn" onclick="thirdItemPlus()">+</span>
                            </div>
                        </div>
                    </td>
                    <td onclick="pickDate3()">
                        <p id="date3" class="date-in-list">01/30/2022</p>
                        <form class="change-date-form" id="changeDateForm3">
                            <input type="text" class="date-input" id="newDateInput3" name="newDateInput3"
                                value="11/30/2021"><br>
                        </form>
                    </td>
                    <td>
                        <div class="selected-food-list-btn">
                            <input type="checkbox" id="checkbox3" onclick="decideBtnColor()" />
                            <label for="checkbox3"></label>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div class="food-list-align">
        <button type="button" class="disabled-btn" id="generate-food-list-btn" onclick="generateList()">
            Generate Shopping List
        </button>
    </div>

    <div class="row navbar ">
        <div class="ss-navbar ss-app-navbar">
            <button class="navbar-button">
                <img src="../assets/navbar/camera.svg" class="navbar-button-clicked">
                <p class="navbar-p navbar-p-clicked mt-1">Camera</p>
            </button>
            <button class="navbar-button">
                <img src="../assets/navbar/shopping.svg">
                <p class="navbar-p mt-1">Shopping List</p>
            </button>
            <a href="../inventory/inventory.html">
                <button class="navbar-button">
                    <img src="../assets/navbar/inventory.svg">
                    <p class="navbar-p mt-1">Inventory</p>
                </button>
            </a>
            <button class="navbar-button">
                <img src="../assets/navbar/settings.svg">
                <p class="navbar-p">Settings</p>
            </button>
        </div>

    </div>

</body>

</html>